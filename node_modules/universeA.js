var u = require('universes');

module.exports = function(callback) {
    var my_universe = {
        name: 'A',
        fry: {},
        leela: {},
        professor: {
            universes: []
        }
    }

    my_universe.fry.name = 'fry of ' + my_universe.name;
    my_universe.leela.name = 'leela of ' + my_universe.name;
    my_universe.professor.name = 'professor of ' + my_universe.name;

    u('universeB', function(universeB) {
        if (typeof(universeB) == 'undefined') {
            console.log(__filename, ": universe A can't get universe B");
            callback(my_universe);
        } else if (typeof(universeB) == 'function') {
            universeB(function(uA) {
                my_universe.professor.universes.push(uA);
                callback(my_universe);
            })
        } else {
            console.log(__filename, ': universe A is wierd', universeB);
        }
    });
}