var u = require('universes');

module.exports = function(callback) {
    var my_universe = {
        name: 'B',
        fry: {},
        leela: {},
        professor: {
            universes: []
        }
    }

    my_universe.fry.name = 'fry of ' + my_universe.name;
    my_universe.leela.name = 'leela of ' + my_universe.name;
    my_universe.professor.name = 'professor of ' + my_universe.name;

    u('universeA', function(universeA) {
        if (typeof(universeA) == 'undefined') {
            console.log(__filename, ": universe B can't get universe A");
            callback(my_universe);
        } else if (typeof(universeA) == 'function') {
            universeA(function(uA) {
                my_universe.professor.universes.push(uA);
                callback(my_universe);
            })
        } else {
            console.log(__filename, ': universe A is wierd', universeA);
        }
    });
}